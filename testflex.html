<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test flex</title>
    <link rel="stylesheet" href="testflex.css">
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
</head>
<body>

    <script>
        // ajouter un attribut plutot qu'un truc global sinon Ã§a fait de la d
        d3.select('body').append('div')
        .attr('class', 'page')
        .style('background-color', 'red')

        d3.selectAll('div')
        .join(
            (enter) => enter.append('.page').call((selection) => {
                selection.transition(t)
                .style('width', '100px')
                .style('height', '100px')
            }),
            (update) => update,
            (exit) => exit.remove(),
        )

        // create transition
        const t = transition()
        .duration(2000)

        d3.selectAll('.page')
        .on('click', function() {
            const clickedDiv = d3.select(this)
            const isSelected = clickedDiv.classed('selectedPage')

            if (isSelected) {
                clickedDiv.classed('selectedPage', false)
                clickedDiv.classed('page', true)
                clickedDiv.transition().duration(500).style('width', '100px')
            } else {
                clickedDiv.classed('selectedPage', true)
                clickedDiv.classed('page', false)
                clickedDiv.transition().duration(500).style('width', '100vw')
            }
        })

    </script>
    
</body>
</html>